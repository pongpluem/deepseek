"use strict";(self.webpackChunklite=self.webpackChunklite||[]).push([[6199],{1417:(e,n,t)=>{t.d(n,{A:()=>o});var i,a=t(96540);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)({}).hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},l.apply(null,arguments)}const o=function(e){return a.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),i||(i=a.createElement("path",{fill:"#242424",fillRule:"evenodd",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0m1 0c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10m-9.073-4.745a.25.25 0 0 0-.25-.255H11.48a.25.25 0 0 0-.25.255l.134 6.292a.25.25 0 0 0 .25.245h.934a.25.25 0 0 0 .25-.244zM11 16.245c0-.653.436-1.082 1.089-1.082h.01c.653 0 1.075.43 1.075 1.083 0 .64-.432 1.068-1.084 1.068-.654 0-1.09-.429-1.09-1.068",clipRule:"evenodd"})))}},49470:(e,n,t)=>{t.d(n,{A:()=>o});var i,a=t(96540);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)({}).hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},l.apply(null,arguments)}const o=function(e){return a.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),i||(i=a.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18M8.25 12h7.5"})))}},94971:(e,n,t)=>{t.d(n,{C:()=>r});var i=t(96540),a=t(52290),l=t(86527),o=t(46879);function r(e){var n=e.entityName,t=void 0===n?"story":n;return i.createElement(a.a,{textAlign:"center",testId:"deleteStoryModalText"},"Deletion is not reversible, and the story will be completely deleted. If you do not want to delete, you can"," ",i.createElement(l.N,{target:"_blank",href:o.Xj4,inline:!0,linkStyle:"OBVIOUS"},"unlist the ",t),".")}},43849:(e,n,t)=>{t.d(n,{$:()=>p,J:()=>m});var i=t(80296),a=t(96540),l=t(44402),o=t(42976),r=t(60603),d=t(8963),s=t(34507),c=function(e){return{overflow:"hidden",transition:"opacity 300ms ease".concat(e?"":" 300ms",", max-height 300ms ease").concat(e?" 300ms":""),maxHeight:e?"0":"450px",opacity:e?0:1}},u=(0,a.createContext)({});function m(e){var n=e.children,t=e.post,m=(0,l.l)(),p=(0,a.useRef)(!1),k=(0,s.K)(t.id,"cache-only").explicitSignal,v=(0,a.useState)(k===o.WN.SHOW_LESS),f=(0,i.A)(v,2),g=f[0],h=f[1],b=(0,r.e)(!1),S=(0,i.A)(b,3),N=S[0],E=S[1],y=S[2],w=(0,a.useCallback)((function(e){g&&p.current&&"max-height"===e.propertyName&&(E(),p.current=!1)}),[g]),C=(0,a.useCallback)((function(){p.current=!0,h(!0)}),[]),A=(0,a.useCallback)((function(){h(!1)}),[]),P=(0,a.useMemo)((function(){return{animateShowLess:C,animateUndo:A}}),[C,A]);return a.createElement(u.Provider,{value:P},a.createElement("div",{className:m(c(g)),onTransitionEnd:w},n),a.createElement(d.b,{post:t,isVisible:N,hide:y}))}var p=function(){return(0,a.useContext)(u)}},8963:(e,n,t)=>{t.d(n,{b:()=>w});var i,a=t(80296),l=t(96540),o=t(17045),r=t(53843),d=t(2550),s=t(21335),c=t(71984),u=t(52290),m=t(94170),p=t(49287),k=t(42976),v=t(60603),f=t(55981),g=t(36557),h=t(44402);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)({}).hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},b.apply(null,arguments)}const S=function(e){return l.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),i||(i=l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.292 9.5v5H2v-5zm1-.124v5.248l.105.08L13 20.484V3.516l-7.603 5.78zm7.905-7.266L4.792 8.5H1.5A.5.5 0 0 0 1 9v6a.5.5 0 0 0 .5.5h3.292l8.405 6.39a.5.5 0 0 0 .803-.398V2.508a.5.5 0 0 0-.803-.398m5.657 7.035a.5.5 0 0 0-.708.707L20.293 12l-2.147 2.148a.5.5 0 1 0 .708.707L21 12.707l2.146 2.148a.5.5 0 1 0 .708-.707L21.707 12l2.147-2.148a.5.5 0 1 0-.708-.707L21 11.293z",clipRule:"evenodd"})))};var N=function(e){return function(n){return{padding:"16px 24px",border:"none",cursor:"pointer",display:"flex","&:first-of-type":{paddingTop:"20px"},"&:last-of-type":{paddingBottom:"20px"},"&:not(:last-of-type)":{borderBottom:"1px solid ".concat(n.colorTokens.border.neutral.primary.base)},"& svg path":{fill:e?n.colorTokens.foreground.error.primary.base:n.colorTokens.foreground.neutral.secondary.base},":hover svg path":{fill:e?n.colorTokens.foreground.error.primary.hover:n.colorTokens.foreground.neutral.primary.base}}}};function E(e){var n=e.onClick,t=e.isReport,i=e.text,a=e.detail,o=(0,h.l)();return l.createElement("button",{className:o(N(t)),onClick:n},t?l.createElement(f.n,null):l.createElement(S,null),l.createElement(u.a,{marginLeft:"24px",display:"flex",flexDirection:"column",gap:"4px",textAlign:"left"},l.createElement(g.kZ,{scale:"M",color:t?"ERROR":"DARKER",clamp:1},i),a&&l.createElement(g.kZ,{scale:"S",clamp:1},a)))}var y=t(34507);function w(e){var n,t,i=e.hide,r=e.isVisible,u=e.post,m=null!==(n=null===(t=u.creator)||void 0===t?void 0:t.id)&&void 0!==n?n:"",k=(0,s.cd)({id:m}).viewerEdge,f=(0,d.A)().viewerId,g=(0,v.e)(!1),h=(0,a.A)(g,3),b=h[0],S=h[1],N=h[2],E=(0,o.M)({viewerId:f,targetAuthorId:m,targetPostId:u.id,onOptimisticComplete:N}),y=(0,l.useCallback)((function(){S(),i()}),[i]);return l.createElement(l.Fragment,null,r&&l.createElement(p.Ne,{source:{dimension:"negative_signal_modal"},extendSource:!0},l.createElement(C,{post:u,report:y,hide:i})),l.createElement(c.e,{isVisible:b,hide:N,type:"story",alreadyBlocking:!(null==k||!k.isBlocking),onSubmit:E}))}function C(e){var n=e.post,t=e.report,i=e.hide,o=(0,l.useState)(!1),r=(0,a.A)(o,2),d=r[0],s=r[1],c=(0,y.K)(n.id),p=c.undo,v=c.showUndoToast,f=(0,l.useCallback)((function(){d&&(v(k.WN.SHOW_LESS),s(!1)),i()}),[d,i]),g=(0,l.useCallback)((function(){p(),s(!0)}),[p]);return l.createElement(m.a,{hide:f,title:"Got it, we'll recommend fewer like this",subtitleTextAlign:"center",subtitle:"You can additionally take any of the actions below.",padding:"40px 32px 32px",subtitleMargin:"16px",confirmButtonStyle:"BRAND",confirmText:"Done",cancelText:"Undo",cancelButtonStyle:"SUBTLE",onCancel:g},l.createElement(u.a,{display:"flex",justifyContent:"center",marginBottom:"32px"},l.createElement(u.a,{width:"100%",maxWidth:"320px",display:"flex",flexDirection:"column",borderRadius:"8px",border:"neutral.primary"},n.creator&&!n.creator.viewerEdge.isMuting&&l.createElement(A,{publisher:n.creator,hide:i}),n.collection&&!n.collection.viewerEdge.isMuting&&l.createElement(A,{publisher:n.collection,hide:i}),l.createElement(E,{onClick:t,isReport:!0,text:"Report story..."}))))}function A(e){var n=e.publisher,t=e.hide,i="User"===n.__typename,a=(0,r.d)({authorId:i?n.id:void 0,collectionId:i?void 0:n.id}),o=a.muteAuthor,d=a.mutePub,s=(0,l.useCallback)((function(){i?o():d(),t()}),[o,d,i]);return l.createElement(E,{onClick:s,text:"Mute ".concat(i?"author":"publication"),detail:n.name})}},34507:(e,n,t)=>{t.d(n,{K:()=>N});var i=t(64467),a=t(80296),l=t(95420),o=t(39181),r=t(96540),d=t(2550),s=t(72130),c=t(49287),u=t(42976),m=t(91830),p=t(97249),k=t(43849),v=t(45458),f=t(50500),g={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ExplicitSignalPostQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_post"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"explicitSignalState"}}]}}]}}]}}].concat((0,v.A)(f.c.definitions))},h={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ExplicitSignalMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"signal"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ExplicitUserSignal"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendExplicitSignal"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"ObjectField",name:{kind:"Name",value:"signal"},value:{kind:"Variable",name:{kind:"Name",value:"signal"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]};function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){(0,i.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function N(e,n){var t,i,v=(0,s.$L)(),f=(0,c.Fo)()||{},b=(0,d.A)().viewerId,N=(0,m.zF)(),E=(0,k.$)().animateUndo,y=(0,l.n)(h),w=(0,a.A)(y,1)[0],C=(0,o.I)(g,{variables:{id:e},fetchPolicy:n}),A=C.data,P=C.loading,F=null==A||null===(t=A.post)||void 0===t||null===(i=t.viewerEdge)||void 0===i?void 0:i.explicitSignalState,x=(0,r.useCallback)((function(n){w({variables:{postId:e,signal:n},update:function(t){b&&t.modify({id:"PostViewerEdge:".concat((0,p.N)(e,b)),fields:{explicitSignalState:function(){return n===u.WN.CLEAR_SIGNAL?null:n}}})}})}),[w,e,b]),I=(0,r.useCallback)((function(n){var t=n.name,i=n.data,a=n.dimension;return v.event(t,S({postId:e,source:a?(0,c.wv)(S(S({},f),{},{dimension:a})):(0,c.wv)(f)},i))}),[e,f]),O=(0,r.useCallback)((function(e){var n=F===u.WN.SHOW_MORE;x(u.WN.CLEAR_SIGNAL),I({name:"post.see_".concat(n?"more":"less",".undo"),dimension:e}),n?R(u.WN.SHOW_MORE):null==E||E()}),[e,F,E]),T=(0,r.useCallback)((function(){x(u.WN.SHOW_MORE),I({name:"post.see_more"})}),[I,x]),D=(0,r.useCallback)((function(){x(u.WN.SHOW_LESS),I({name:"post.see_less",data:{mutationSent:!0}})}),[I,x]),R=(0,r.useCallback)((function(e){N({message:"Undone. We won’t recommend ".concat(e===u.WN.SHOW_LESS?"fewer":"more"," stories like this."),extraParams:{hideCloseButton:!0}})}),[]),V=(0,r.useCallback)((function(){N({toastStyle:"USER_POSITIVE_SIGNAL",extraParams:{onClickUndo:function(){return O("toast")}}})}),[N,O]);return{loading:P,undo:O,showMore:T,showLess:D,explicitSignal:F,showUndoToast:R,showMoreToast:V}}},73054:(e,n,t)=>{t.d(n,{G:()=>Fn});var i=t(58168),a=t(80045),l=t(96540),o=t(80296),r=t(64467),d=t(14792),s=t.n(d),c=t(39181),u=t(94971),m=t(6671),p=t(14782),k=t(86527),v=t(52290),f=t(85050);function g(e){var n=e.onClick,t=e.hidePopover,i=e.showAt,a=e.bookmarkIcon,o=(0,l.useCallback)((function(){t(),n()}),[n,t]);return l.createElement(f.V,{xs:i.xs,sm:i.sm,md:i.md,lg:i.lg,xl:i.xl},l.createElement(p.q3,null,l.createElement(k.N,{"aria-controls":"aria-id","aria-expanded":"false",onClick:o},l.createElement(v.a,{display:"flex",flexDirection:"row",alignItems:"center",ariaHidden:"true",gap:"12px"},a,"Save"))),l.createElement(p.eS,null))}var h=t(69415),b=t(36557),S=t(61333),N={width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"};function E(e){var n=e.hidePopover,t=(0,h.y)(),i=t.areHighlightsHidden,a=t.toggleHideHighlights,r=(0,l.useState)(),d=(0,o.A)(r,2),s=d[0],c=d[1],u=(0,l.useCallback)((function(){a(),n()}),[n,a]);return(0,l.useEffect)((function(){c(navigator.userAgent)}),[]),l.createElement(p.q3,{paddingTopBottom:"6px"},l.createElement(k.N,{onClick:u,rules:N},l.createElement("span",null,i?"Show":"Hide"," highlights"),!(0,S.Gz)(s)&&l.createElement(v.a,{padding:"2px 6px",borderRadius:"4px",border:"neutral.tertiary"},l.createElement(b.kZ,{scale:"XS"},(0,S.cX)(s)?"⌘":"Ctrl"," /"))))}var y=t(70521),w=t(69733),C=t(1491),A=t(27721),P=t(1722),F=t(56743),x=t(39160),I=t(51771),O=function(e){var n=e.post,t=e.hidePopover,i=e.showHideHighlights,a=(0,A.R)().value,o=null==a?void 0:a.id,r=(0,P.h)(n).viewerEdge,d=(0,w.wA)(),s=l.useCallback((function(e){return d((0,F.K7)(e))}),[d]),c=(0,x.Dy)((function(e){return e.multiVote.clapsPerPost})),u=(0,I.F)(c,n,r),m=u.clapCount,v=u.viewerClapCount,f=(0,C.f)(),g=o&&m&&v&&v>0;return g||i?l.createElement(l.Fragment,null,!!g&&l.createElement(p.q3,null,l.createElement(k.N,{onClick:function(){f(n,(null==a?void 0:a.id)||"",-v,r),s({postId:n.id,clapCount:m-v,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),t()}},"Undo claps")),l.createElement(p.eS,null)):null},T=t(93948),D=t(44929),R=t(79193),V=t(58285),_=t(9942),M=t(60487),L=t(5249),H=t(91830),B={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PostAllowResponsesMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"allowResponses"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setPostAllowResponses"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}}},{kind:"Argument",name:{kind:"Name",value:"allowResponses"},value:{kind:"Variable",name:{kind:"Name",value:"allowResponses"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"allowResponses"}}]}}]}}]},j=(0,w.Ng)()((function(e){var n=e.children,t=e.dispatch,i=e.onCompleted,a=e.targetPostId;return l.createElement(L.s,{mutation:B,onCompleted:function(){t((0,H.MZ)({message:"Responses are now hidden for this post."})),i&&i()},variables:{targetPostId:a,allowResponses:!1},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:a,allowResponses:!1}}},(function(e){return n({mutate:e})}))})),W=(0,w.Ng)()((function(e){var n=e.children,t=e.dispatch,i=e.onCompleted,a=e.targetPostId;return l.createElement(L.s,{mutation:B,onCompleted:function(){t((0,H.MZ)({message:"Responses are now shown for this post."})),i&&i()},variables:{targetPostId:a,allowResponses:!0},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:a,allowResponses:!0}}},(function(e){return n({mutate:e})}))})),U=t(22036),z=t(60603),Z=function(e){var n=e.hidePopover,t=e.postId,i=e.allowResponses,a=(0,z.e)(!1),r=(0,o.A)(a,3),d=r[0],s=r[1],c=r[2],u=function(){c(),n()};return l.createElement(l.Fragment,null,l.createElement(j,{targetPostId:t},(function(e){var n=e.mutate;return l.createElement(U.n,{onConfirm:n,isVisible:d,hide:u,entityTypename:"Post"})})),l.createElement(W,{targetPostId:t},(function(e){var n=e.mutate;return l.createElement(p.q3,null,l.createElement(k.N,{onClick:function(){i?s():n()}},i?"Hide responses":"Show responses"))})))},G=t(65364),q=t(28899),$=t(45458),K=t(82567),Y={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionSubmissionOption_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionAvatar_collection"}}]}}].concat((0,$.A)(K.$.definitions))},J={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CollectionSubmissionPopoverQuery"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"writerCollections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionSubmissionOption_collection"}}]}},{kind:"Field",name:{kind:"Name",value:"adminCollections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionSubmissionOption_collection"}}]}}]}}]}}].concat((0,$.A)(Y.definitions))},Q=t(95420),X=t(42976),ee=[{kind:"FragmentDefinition",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}}],ne={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ManageCollectionPostStatusMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CollectionPostStatus"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"manageCollectionPostStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"collectionSlug"},value:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"}}]}}]}}]}}].concat((0,$.A)(ee))},te={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RejectPostFromPubMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CollectionPostStatus"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"manageCollectionPostStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"collectionSlug"},value:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"}}]}}]}}]}}].concat((0,$.A)(ee))},ie=function(e){var n=(0,Q.n)(ne),t=(0,o.A)(n,1)[0];return(0,l.useCallback)((function(n){return t({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:X.d6.APPROVED}})}),[e])},ae=function(e){var n=(0,Q.n)(te),t=(0,o.A)(n,1)[0];return(0,l.useCallback)((function(n){return t({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:X.d6.REMOVED},optimisticResponse:{manageCollectionPostStatus:{__typename:"Post",id:e.id,statusForCollection:null,collection:null,pendingCollection:null}}}).then((function(e){if(e.errors&&e.errors[0])throw e.errors[0];return e}))}),[e])},le=t(52764),oe=t(3005),re=t(99731),de=t(85864),se=t(24960),ce=t(53908),ue=t(56942),me=t(27622),pe=t(66305),ke="collectionSubmissionPopover",ve=[{name:"",value:"No publication",content:l.createElement(v.a,{height:"32px",display:"flex",alignItems:"center",marginLeft:"5px"},l.createElement(b.kZ,{scale:"M",color:"DARKER"},"No publication"))}];function fe(e){var n=e.collection;return n.name?l.createElement(v.a,{display:"flex",justifyContent:"space-between",width:"200px",alignItems:"center",marginLeft:"5px"},l.createElement(b.kZ,{scale:"M",color:"DARKER"},n.name),l.createElement(q.u,{collection:n,size:32})):null}function ge(e){var n=e.show,t=e.post,i=t.statusForCollection,a=t.isPublished,r=l.useState(!1),d=(0,o.A)(r,2),s=d[0],c=d[1];return s||pe.R5.on("load",(function(){return c(!0)})),!i&&a&&s?l.createElement(be,{post:t,noQueryReturn:null},(function(e){var i=e.loading,a=e.error,o=e.data;if(i||a)return null;var r=(void 0===o?{viewer:void 0}:o).viewer,d=t.creator;if(!r||!d||r.id!==d.id)return null;var s=r.adminCollections,c=r.writerCollections;return 0===s.length&&0===c.length?null:l.createElement(p.q3,null,l.createElement(k.N,{"aria-controls":ke,"aria-expanded":"false",onClick:n},"Add to publication"))})):null}function he(e){var n=e.isVisible,t=e.hide;return l.createElement(oe.l,{isVisible:n,hide:t,withCloseButton:!0},l.createElement(v.a,{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",maxWidth:"480px"},l.createElement(ue.DZ,{scale:"M",tag:"h3"},"Story submitted"),l.createElement(v.a,{paddingTop:"8px",paddingBottom:"24px"},l.createElement(me.Pd,{scale:"M"},"We’ll email you when the publication editor has reviewed your submission.")),l.createElement(re.$n,{buttonStyle:"OBVIOUS",onClick:t},"OK")))}var be=function(e){var n=e.children,t=e.post,i=e.noQueryReturn,a=t.creator;return a?l.createElement(le.c,null,(function(e){return e?e.id!==a.id?i:l.createElement(G.X,{query:J,ssr:!1},(function(e){var t=e.loading,i=e.error,a=e.data;return n({loading:t,error:i,data:a})})):i})):i},Se=function(e){var n=e.post,t=e.hide,i=e.isVisible,a=e.children,r=l.useState(!1),d=(0,o.A)(r,2),s=d[0],c=d[1],u=l.useState(""),m=(0,o.A)(u,2),p=m[0],f=m[1],g=ie(n),h=function(e){var n=(0,Q.n)(ne),t=(0,o.A)(n,1)[0];return(0,l.useCallback)((function(n){return t({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:X.d6.PENDING},optimisticResponse:{manageCollectionPostStatus:{__typename:"Post",id:e.id,statusForCollection:X.d6.PENDING,pendingCollection:n}}})}),[e])}(n);return s||pe.R5.on("load",(function(){return c(!0)})),n.isPublished&&s?l.createElement(de.B,null,(function(e){var o=e.isVisible,r=e.hide,d=e.show;return l.createElement(l.Fragment,null,l.createElement(he,{hide:r,isVisible:o}),l.createElement(be,{post:n,noQueryReturn:a},(function(e){var o=e.loading,r=e.error,s=e.data;if(o||r)return a;var c=(void 0===s?{viewer:void 0}:s).viewer,u=n.creator;if(!c||!u||c.id!==u.id)return a;var m=c.adminCollections,S=c.writerCollections;if(0===m.length&&0===S.length)return a;var N=m.concat(S).filter((function(e){return!!e&&!!e.slug&&!!e.name})).map((function(e){return{name:e.slug||"",value:e.name||"",content:l.createElement(fe,{collection:e})}})),E=ve.concat(N),y=m.reduce((function(e,n){return e[n.slug||""]=n,e}),{}),w=S.reduce((function(e,n){return e[n.slug||""]=n,e}),{}),C="";if(p){var A=E.find((function(e){return e.name===p}));A&&(C=A.value)}var P="addStoryToPublicationTitle";return l.createElement(se.A,{ariaId:ke,hide:t,isVisible:i,popoverRenderFn:function(){return l.createElement(v.a,{padding:"20px",width:"280px",display:"flex",flexDirection:"column"},l.createElement(b.kZ,{scale:"M",color:"DARKER",ariaLabelledById:P},"Add your story to a publication:"),l.createElement(v.a,{marginTop:"10px",position:"relative"},l.createElement(v.a,{position:"absolute",height:"16px",width:"100%",bottom:"0",zIndex:"100",backgroundImage:"linear-gradient(transparent, #ffffff)"}),l.createElement(v.a,{maxHeight:"160px",overflow:"auto"},l.createElement(ce.z,{value:C,onChange:f,options:E,radioButtonsName:"addStory",ariaLabelledBy:P}))),l.createElement(v.a,{display:"flex",marginTop:"20px"},p in y?l.createElement(re.$n,{onClick:function(){var e=y[p];t(),g(e).then((function(){window.location.reload()}))},buttonStyle:"OBVIOUS"},"Add story"):l.createElement(re.$n,{onClick:function(){var e=w[p];h(e),t(),d()},disabled:!p},"Submit"),l.createElement(v.a,{marginLeft:"10px"},l.createElement(b.kZ,{scale:"M",color:"LIGHTER"},l.createElement(k.N,{onClick:t},l.createElement(v.a,{padding:"10px"},"Cancel"))))),l.createElement(v.a,{marginTop:"10px"},l.createElement(b.kZ,{scale:"M"},"This story will be automatically submitted to the publication. When you submit your story, the publication's editors will be notified and will be able to edit your story.")))}},a)})))})):a},Ne=function(e){var n=e.children,t=e.isVisible,i=e.post,a=e.hide,o=ie(i),r=ae(i),d=(0,w.wA)(),s=i.pendingCollection;return s?l.createElement(se.A,{ariaId:"manageSubmissionPopover",isVisible:t,hide:a,popoverRenderFn:function(){return l.createElement(v.a,{padding:"16px",maxWidth:"280px"},l.createElement(v.a,{display:"flex",flexDirection:"row",alignItems:"center"},l.createElement(v.a,{paddingRight:"8px"},l.createElement(q.u,{collection:s,size:40})),l.createElement(b.kZ,{scale:"S"},"This draft is submitted to ",s.name,".")),l.createElement(v.a,{flexDirection:"row",display:"flex",paddingTop:"16px"},l.createElement(v.a,{paddingRight:"8px"},l.createElement(re.$n,{buttonStyle:"OBVIOUS",onClick:function(){a(),o(i.pendingCollection).then((function(){window.location.reload()}))}},"Accept")),l.createElement(re.$n,{buttonStyle:"SUBTLE",onClick:function(){r(i.pendingCollection).then((function(){d((0,H.MZ)({message:"Story removed from ".concat(s.name||"publication")}))})),a()}},"Don't accept")))}},n):n},Ee=function(e,n){return n&&e.creator&&n.id===e.creator.id},ye=t(86329),we="removeFromPublicationPopover",Ce=function(e){var n=e.viewer,t=e.show,i=e.post,a=(0,ye.J)(i.pendingCollection||i.collection).viewerEdge,o=null==a?void 0:a.isEditor;return n&&("APPROVED"===i.statusForCollection&&(o||function(e,n){var t=e.pendingCollection||e.collection;return t&&t.creator&&n.id===t.creator.id}(i,n)||Ee(i,n))||"PENDING"===i.statusForCollection&&Ee(i,n))?l.createElement(p.q3,null,l.createElement(k.N,{"aria-controls":we,"aria-expanded":"false",onClick:t},"Remove story from publication")):null},Ae=function(e){var n=e.children,t=e.isVisible,i=e.hide,a=e.post,o=e.viewer,r=(0,w.wA)(),d=ae(a),s=a.collection||a.pendingCollection;return s?l.createElement(se.A,{ariaId:we,isVisible:t,hide:i,popoverRenderFn:function(){return l.createElement(v.a,{padding:"16px",maxWidth:"280px"},l.createElement(v.a,{display:"flex",flexDirection:"row",alignItems:"center"},l.createElement(v.a,{paddingRight:"8px"},l.createElement(q.u,{collection:s,size:40})),"APPROVED"===a.statusForCollection?l.createElement(b.kZ,{scale:"S"},Ee(a,o)?"Your":"This"," story is published in"," ",s.name,"."):"PENDING"===a.statusForCollection?l.createElement(b.kZ,{scale:"S"},"Your story is being reviewed by ",s.name," editors."):l.createElement(b.kZ,{scale:"S"},"This draft is submitted to ",s.name)),l.createElement(v.a,{flexDirection:"row",display:"flex",paddingTop:"16px"},l.createElement(v.a,{paddingRight:"8px"},l.createElement(re.$n,{buttonStyle:"SUBTLE",onClick:function(){d(s).then((function(){r((0,H.MZ)({message:"Story removed from ".concat(s.name||"publication")}))}),(function(){r((0,H.MZ)({message:"There was a problem removing the story from ".concat(s.name||"publication"),toastStyle:"ERROR"}))})),i()}},"PENDING"===a.statusForCollection?"Cancel submission":"Remove from ".concat(s.name||"")))))}},n):n},Pe=t(38714),Fe=t(89142),xe=t(32038),Ie=t(19723),Oe=t(43634),Te=t(59348),De=t(88308),Re=t(21335),Ve=t(71984),_e=t(17045),Me=function(e){var n=e.hidePopover,t=e.targetUserId,i=e.postId,a=e.viewerId,r=(0,Re.cd)({id:t}).viewerEdge,d=!(null==r||!r.isBlocking),s=(0,z.e)(!1),c=(0,o.A)(s,3),u=c[0],m=c[1],v=c[2],f=(0,l.useCallback)((function(){v(),n()}),[n,v]),g=(0,_e.M)({viewerId:a,targetAuthorId:t,targetPostId:i,onOptimisticComplete:f});return l.createElement(l.Fragment,null,l.createElement(Ve.e,{onSubmit:g,isVisible:u,hide:f,type:"story",alreadyBlocking:d}),l.createElement(p.q3,null,l.createElement(k.N,{onClick:m,color:"RED"},"Report story...")))},Le=t(48011);function He(e){var n,t=(0,A.R)().value,i=(0,l.useState)(!(null==t||!t.dismissableFlags.includes(e))),a=(0,o.A)(i,2),r=a[0],d=a[1],s=(0,Q.n)(Le.x,{variables:{userId:null!==(n=null==t?void 0:t.id)&&void 0!==n?n:"",flag:e}}),c=(0,o.A)(s,1)[0],u=(0,l.useCallback)((function(){r||c(),d(!0)}),[r,c]);return{isDismissed:r,dismiss:u}}var Be=t(46445),je=t(32996),We=t(51260),Ue=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(){for(var e=0,t=n;e<t.length;e++)(0,t[e])()}},ze=t(46879),Ze=t(45977),Ge=t(74938),qe=t(89429),$e=t(83983),Ke=t(2674),Ye=t(94405),Je=t(77930),Qe={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CreatorActionOverflowPopover_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allowResponses"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedByCreatorAt"}},{kind:"Field",name:{kind:"Name",value:"curationEligibleAt"}},{kind:"Field",name:{kind:"Name",value:"responseDistribution"}},{kind:"Field",name:{kind:"Name",value:"inResponseToPostResult"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"inResponseToCatalogResult"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MutePopoverOptions_creator"}},{kind:"FragmentSpread",name:{kind:"Name",value:"auroraHooks_publisher"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MutePopoverOptions_collection"}},{kind:"FragmentSpread",name:{kind:"Name",value:"auroraHooks_publisher"}}]}},{kind:"Field",name:{kind:"Name",value:"publicationsFeaturingPost"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"useIsPinnedInContext_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"OverflowMenuItemUndoClaps_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AddToCatalogBase_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"FeatureStoryMenuItem_post"}}]}}].concat((0,$.A)(Ze.o.definitions),(0,$.A)(Ge.q.definitions),(0,$.A)(Ze._.definitions),(0,$.A)(qe.N.definitions),(0,$.A)($e.G.definitions),(0,$.A)(Ke.n.definitions),(0,$.A)(Ye.od.definitions),(0,$.A)(Je.T.definitions))},Xe={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CreatorActionOverflowPopoverQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CreatorActionOverflowPopover_post"}}]}}]}}].concat((0,$.A)(Qe.definitions))};function en(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function nn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?en(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):en(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var tn=function(e){var n=(0,c.I)(Xe,{variables:{postId:e.post.id}}).data;if(null==n||!n.post)return null;var t=nn(nn({},e),{},{post:n.post});return e.showHideHighlights?l.createElement(an,t):l.createElement(on,t)};function an(e){var n=He(X.bT.HIDE_HIGHLIGHTS_TOOLTIP),t=n.isDismissed,a=n.dismiss;return l.createElement(je.A,{isVisible:!t,message:"Looking to hide highlights? You can now hide them from the “•••” menu.",dismissText:"Okay, got it",dismiss:a,boxProps:{maxWidth:"200px"},positioningStrategy:"fixed"},l.createElement(on,(0,i.A)({onButtonClick:a},e)))}var ln,on=function(e){var n,t,a,r=e.post,d=e.hideUndoApplause,c=void 0!==d&&d,f=e.isResponsive,h=e.popoverPositioningStrategy,b=e.hideOnScroll,S=e.testId,N=e.prependMenuItems,w=e.rules,C=e.showAddToList,P=e.onButtonClick,F=e.showHideHighlights,I=r.creator,L=r.collection,B=(0,l.useState)(!1),j=(0,o.A)(B,2),W=j[0],U=j[1],G=(0,l.useState)(!1),q=(0,o.A)(G,2),$=q[0],K=q[1],Y=(0,l.useState)(!1),J=(0,o.A)(Y,2),Q=J[0],ee=J[1],ne=r.allowResponses,te=(0,ye.J)(L).viewerEdge,ie=(0,H.zF)(),ae=(0,A.R)().value,le=null==ae?void 0:ae.id,oe=r.responseDistribution===X.IZ.DISTRIBUTED,re=!!r.inResponseToPostResult||!!r.inResponseToCatalogResult,de=re?"response":"story",ce=(0,Fe.L)(r),ue=(0,o.A)(ce,2),me=ue[0],pe=ue[1],ke=(0,Pe.M)(r.collection),ve=(0,Pe.M)(r.creator),fe=(0,l.useCallback)((function(e){var n,t,i;ie({extraParams:{collectionName:(null===(n=r.collection)||void 0===n?void 0:n.name)||"",becamePinned:!(null===(t=e.data)||void 0===t||null===(i=t.setPinnedAt)||void 0===i||!i.pinnedAt)},toastStyle:"POST_PINNED_TO_COLLECTION_HOMEPAGE"})}),[null===(n=r.collection)||void 0===n?void 0:n.name]),he=(0,l.useCallback)((function(e,n){var t;"MutationSuccess"===(null===(t=e.data)||void 0===t?void 0:t.setPostPinnedOnCreatorProfile.__typename)&&ie({message:"This ".concat(de,n?" has been unpinned from your profile's homepage":" has been pinned to your profile's homepage")})}),[]),be=(0,l.useCallback)((function(){pe().then(fe)}),[pe,fe,null==r||null===(t=r.collection)||void 0===t?void 0:t.name]),Ee=(0,Fe.m)(r),we=(0,o.A)(Ee,2),Re=we[0],Ve=we[1],_e=(0,l.useCallback)((function(){Ve().then((function(e){return he(e,Re)}))}),[Ve,he]),Le=(0,x.d4)((function(e){return e.config.authDomain})),He=(0,l.useState)(!1),je=(0,o.A)(He,2),Ze=je[0],Ge=je[1],qe=(0,z.e)(!1),$e=(0,o.A)(qe,3),Ke=$e[0],Ye=$e[1],Je=$e[2],Qe=(0,z.e)(!1),Xe=(0,o.A)(Qe,4),en=Xe[0],nn=Xe[2],tn=Xe[3],an=(0,R.Q)(r.id),ln=(0,o.A)(an,1)[0],on=(0,z.e)(!1),rn=(0,o.A)(on,3),dn=rn[0],sn=rn[1],cn=rn[2],un=(0,l.useCallback)((function(){W?U(!1):$?K(!1):tn(),null==P||P()}),[W,$,tn,P]),mn=(0,We.Nw)("ShowHome",{}),pn=(0,l.useCallback)((function(){ln().then((function(){window.location.assign(mn)}))}),[ln,mn]),kn="Delete story";oe?kn="Delete story and response":re&&(kn="Delete response");var vn=oe?xe.e:l.createElement(u.C,{entityName:de}),fn=(0,Ie._P)("can_edit_members_only_posts");if(!I||!ae)return null;var gn=le===I.id,hn=null==te?void 0:te.isEditor,bn=gn||hn,Sn=fn&&r&&r.isLocked,Nn=bn||Sn,En="creatorActionOverflowMenu",yn=hn&&!gn,wn=!re||oe,Cn=L&&hn&&r.isPublished,An=null==r?void 0:r.publicationsFeaturingPost.map((function(e){return e.id})),Pn=null!==(a=L&&An.includes(L.id))&&void 0!==a&&a,Fn=function(){return{maxWidth:"280px"}},xn=function(){oe&&(nn(),Ye())};if(Ze)return l.createElement(_.r,{to:(0,ze.ycK)(Le,r.id)});var In={kind:X.Bd.POST,target:r};return l.createElement(l.Fragment,null,l.createElement(Be.T,{buttonStyle:"STRONG",cancelText:"Cancel",isVisible:Ke,onConfirm:function(){Ge(!0)},hide:Je,titleText:"Edit story and response",confirmText:"Continue",isDestructiveAction:!1},xe.T),l.createElement(Be.T,{buttonStyle:"ERROR",cancelText:"Cancel",isVisible:dn,onConfirm:pn,hide:cn,titleText:kn,confirmText:"Delete",isDestructiveAction:!0,testId:"deleteStoryModal"},vn),l.createElement(T.f,(0,i.A)({},In,{viewer:ae}),(function(e){var n=e.onClick,t=e.bookmarkIcon;return l.createElement(se.A,{popoverRules:Fn,targetDistance:10,ariaId:En,isVisible:en,hide:nn,positioningStrategy:h,hideOnScroll:b,popoverRenderFn:function(){return l.createElement(p.Ni,null,N&&l.createElement(l.Fragment,null,N(nn)),C&&l.createElement(g,{showAt:C,onClick:n,hidePopover:nn,bookmarkIcon:t}),l.createElement(l.Fragment,null,l.createElement(D.D,{type:"popover",handleClick:xn,href:(0,ze.ycK)(Le,r.id),isVisible:!!Nn},"Edit ",de),Cn&&l.createElement(m.k,{post:r,hidePopover:nn,isFeaturedInCurrentPublication:Pn,showCollectionName:!0,showNewLabelOrTokenCount:!0}),L&&hn&&ke&&wn&&l.createElement(p.q3,null,l.createElement(k.N,{onClick:be,rules:{textAlign:"left"}},me?"Unpin this ".concat(de," from "):"Pin this ".concat(de," to "),L.name)),gn&&ve&&wn&&l.createElement(p.q3,null,l.createElement(k.N,{onClick:_e},Re?"Unpin this ".concat(de," from your profile"):"Pin this ".concat(de," to your profile"))),l.createElement(M.z,{post:r,onClick:nn,menuStyle:"TEXT"}),l.createElement(p.eS,null),l.createElement(p.q3,null,l.createElement(k.N,{href:(0,ze.vEY)(Le,r.id)},s()(de)," settings")),l.createElement(p.q3,null,l.createElement(k.N,{href:(0,ze.doj)(Le,r.id)},s()(de)," stats")),l.createElement(p.eS,null),F&&l.createElement(E,{hidePopover:nn}),l.createElement(Z,{hidePopover:nn,postId:r.id,allowResponses:ne}),l.createElement(ge,{post:r,show:function(){K(!0),nn()}}),l.createElement(Ce,{viewer:ae,post:r,show:function(){ee(!0),nn()}}),gn&&l.createElement(p.q3,null,l.createElement(k.N,{onClick:Ue(nn,sn),color:"RED"},"Delete ",de)),yn?l.createElement(l.Fragment,null,l.createElement(p.eS,null),!c&&l.createElement(O,{post:r,hidePopover:nn}),l.createElement(l.Fragment,null,le?l.createElement(Me,{targetUserId:I.id,postId:r.id,hidePopover:nn,viewerId:le}):l.createElement(p.q3,null,l.createElement(Oe.r,{operation:"register",post:r,susiEntry:"report_footer"},"Report this ",de))),l.createElement(V.J,{hidePopover:nn,creator:I,collection:L,postId:r.id}),l.createElement(Te.U,{hidePopover:nn,creator:I,viewer:ae}),l.createElement(De.U,{hidePopover:nn,creator:I,viewer:ae})):null))}},l.createElement(Se,{post:r,isVisible:$,hide:function(){K(!1)}},l.createElement(Ae,{viewer:ae,post:r,isVisible:Q,hide:function(){ee(!1)}},l.createElement(Ne,{post:r,isVisible:W,hide:function(){U(!1)}},l.createElement(v.a,{flexGrow:"0",marginRight:"-4px"},l.createElement(y.Z,{ariaControls:En,ariaExpanded:en?"true":"false",ariaLabel:"More options",onClick:function(){return un()},isResponsive:f,tooltipText:"More",testId:S,rules:w}))))))})))},rn=t(49470);function dn(){return dn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)({}).hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},dn.apply(null,arguments)}const sn=function(e){return l.createElement("svg",dn({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),ln||(ln=l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10m-13.75-.5a.5.5 0 0 0 0 1h7.5a.5.5 0 0 0 0-1z",clipRule:"evenodd"})))};var cn;function un(){return un=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)({}).hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},un.apply(null,arguments)}const mn=function(e){return l.createElement("svg",un({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),cn||(cn=l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10M12 7.75a.5.5 0 0 1 .5.5v3.25h3.25a.5.5 0 0 1 0 1H12.5v3.25a.5.5 0 0 1-1 0V12.5H8.25a.5.5 0 0 1 0-1h3.25V8.25a.5.5 0 0 1 .5-.5",clipRule:"evenodd"})))};var pn;function kn(){return kn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)({}).hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},kn.apply(null,arguments)}const vn=function(e){return l.createElement("svg",kn({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),pn||(pn=l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18m10-9c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10M7.75 12a.5.5 0 0 1 .5-.5h3.25V8.25a.5.5 0 0 1 1 0v3.25h3.25a.5.5 0 0 1 0 1H12.5v3.25a.5.5 0 0 1-1 0V12.5H8.25a.5.5 0 0 1-.5-.5",clipRule:"evenodd"})))};var fn=t(43849),gn=t(8963),hn=t(34507),bn={pointerEvents:"none"};function Sn(e){var n=e.hidePopover,t=e.post,i=(0,z.e)(!1),a=(0,o.A)(i,3),r=a[0],d=a[1],s=a[2],c=(0,hn.K)(t.id),u=c.loading,m=c.showMore,k=c.showLess,v=c.explicitSignal,f=c.undo,g=c.showUndoToast,h=c.showMoreToast,b=(0,fn.$)(),S=b.animateShowLess,N=b.animateUndo,E=v===X.WN.SHOW_MORE,y=v===X.WN.SHOW_LESS,w=(0,l.useCallback)((function(){E?f():(m(),h()),n()}),[m,n,E,f,h]),C=(0,l.useCallback)((function(){y?(f(),g(X.WN.SHOW_LESS),n(),null==N||N()):(k(),S?(n(),S()):d())}),[k,n,y,f,g,S,N]),A=(0,l.useCallback)((function(){n(),s()}),[n,s]);return l.createElement(l.Fragment,null,l.createElement(Nn,{value:X.WN.SHOW_MORE,onClick:w,isSelected:E,loading:u}),l.createElement(Nn,{value:X.WN.SHOW_LESS,onClick:C,isSelected:y,loading:u}),l.createElement(p.eS,null),l.createElement(gn.b,{isVisible:r,hide:A,post:t}))}var Nn=function(e){var n=e.value,t=e.onClick,i=e.isSelected,a=e.loading;return l.createElement(p.q3,{loading:a},l.createElement(k.N,{onClick:t,disabled:a,rules:a?bn:void 0},l.createElement(v.a,{display:"flex"},l.createElement(v.a,{marginRight:"12px",flexShrink:"0"},l.createElement(En,{value:n,isSelected:i})),l.createElement(v.a,{display:"flex",flexDirection:"column",marginTop:"2px",gap:"4px",textAlign:"left"},i?"Undo show ":"Show ",n===X.WN.SHOW_MORE?"more":"less",l.createElement(b.kZ,{scale:"S"},i?"Undo recommending ":"Recommend ",n===X.WN.SHOW_MORE?"more":"fewer"," stories like this to me.")))))};function En(e){var n=e.isSelected;return e.value===X.WN.SHOW_MORE?n?l.createElement(mn,null):l.createElement(vn,null):n?l.createElement(sn,null):l.createElement(rn.A,null)}var yn=t(63933),wn=t(49287);function Cn(e){var n=e.author,t=e.collection,i=e.hidePopover,a=(0,Re.cd)(n).viewerEdge,o=(0,ye.J)(t).viewerEdge,r=(null==n?void 0:n.id)||"",d=(null==t?void 0:t.id)||"",s=null==a?void 0:a.isFollowing,c=null==o?void 0:o.isFollowing,u=(0,yn.u)(r,d),m=u.followUser,v=u.unfollowUser,f=u.followCollection,g=u.unfollowCollection,h=(0,wn.jI)(),b=(0,A.R)().value,S=b&&r===b.id,N=(0,l.useCallback)((function(){s?v():m(),null==i||i()}),[r,s,m,v,i,h]),E=(0,l.useCallback)((function(){c?g():f(),null==i||i()}),[d,c,f,i,h,g]);return b?l.createElement(l.Fragment,null,!!n&&!S&&l.createElement(p.q3,null,l.createElement(k.N,{onClick:N},s?"Unfollow":"Follow"," author")),!!t&&!(null!=o&&o.isEditor)&&l.createElement(p.q3,null,l.createElement(k.N,{onClick:E},c?"Unfollow":"Follow"," publication"))):null}function An(e){var n=e.post,t=e.isResponsive,a=e.popoverPositioningStrategy,r=e.viewer,d=e.hideOnScroll,s=e.testId,c=e.prependMenuItems,u=e.rules,m=e.showAddToList,k=e.onButtonClick,v=e.showHideHighlights,f=n.id,h=n.creator,b=n.collection,S=(0,z.e)(!1),N=(0,o.A)(S,4),w=N[0],C=N[2],A=N[3],P=(0,l.useCallback)((function(){null==k||k(),A()}),[A,k]),F={kind:X.Bd.POST,target:n},x=(0,l.useCallback)((function(e,t){return l.createElement(p.Ni,{width:"248px"},c&&l.createElement(l.Fragment,null,c(C)),m&&l.createElement(g,{showAt:m,onClick:e,hidePopover:C,bookmarkIcon:t}),l.createElement(Sn,{hidePopover:C,post:n}),v&&l.createElement(E,{hidePopover:C}),l.createElement(O,{post:n,hidePopover:C,showHideHighlights:v}),l.createElement(Cn,{author:h,collection:b,hidePopover:C}),l.createElement(p.eS,null),l.createElement(V.J,{creator:h,collection:b,hidePopover:C,postId:f}),l.createElement(Me,{postId:f,viewerId:null==r?void 0:r.id,targetUserId:(null==h?void 0:h.id)||"",hidePopover:C}))}),[c,m]);return null!=h&&h.id?l.createElement(T.f,(0,i.A)({},F,{viewer:r}),(function(e){var n=e.onClick,i=e.bookmarkIcon;return l.createElement(se.A,{isVisible:w,positioningStrategy:a,targetDistance:10,hide:C,popoverRenderFn:function(){return x(n,i)},hideOnScroll:d},l.createElement(y.Z,{onClick:P,ariaLabel:"More options",isResponsive:t,tooltipText:"More",testId:s,rules:u}))})):null}var Pn=["showAddToList"];function Fn(e){var n=e.showAddToList,t=(0,a.A)(e,Pn),o=t.post,r=o.creator,d=o.collection,s=o.visibility,c=(0,A.R)(),u=c.loading,m=c.value,p=(0,ye.J)(d).viewerEdge,k=!u&&!!m,v=!(null==p||!p.isEditor),f=(null==m?void 0:m.id)===(null==r?void 0:r.id),g=s===X.dL.UNLISTED?void 0:n;return r&&k?v||f?l.createElement(tn,(0,i.A)({showAddToList:g},t)):t.showHideHighlights?l.createElement(xn,(0,i.A)({viewer:m,showAddToList:g},t)):l.createElement(An,(0,i.A)({viewer:m,showAddToList:g},t)):null}function xn(e){var n=He(X.bT.HIDE_HIGHLIGHTS_TOOLTIP),t=n.isDismissed,a=n.dismiss;return l.createElement(je.A,{isVisible:!t,message:"Looking to hide highlights? You can now hide them from the “•••” menu.",dismissText:"Okay, got it",dismiss:a,boxProps:{maxWidth:"200px"},positioningStrategy:"fixed"},l.createElement(An,(0,i.A)({onButtonClick:a},e)))}},43002:(e,n,t)=>{t.d(n,{w:()=>c});var i=t(96540),a=t(18599),l=t(60213),o=t(41299),r=t(86527),d=t(5600),s=t(36557),c=function(e){var n=e.collection,t=e.clamp,c=e.popoverPlacement,u=void 0===c?"bottom":c,m=e.scale,p=void 0===m?"M":m,k=e.testId,v=(0,l.z)(n),f=(0,i.useCallback)((function(){return i.createElement(a.a,{collection:n})}),[n]);return i.createElement(o.R,{placement:u,targetDistance:a.r,mouseLeaveDelay:100,mouseEnterDelay:d.A,popoverRenderFn:f,display:"block",noArrow:!0},i.createElement(r.N,{inline:!0,href:v,linkStyle:"SUBTLE",display:"flex",rules:{alignItems:"center"},"data-testid":k},i.createElement(s.kZ,{scale:p,color:"DARKER",clamp:t},n.name)))}},44929:(e,n,t)=>{t.d(n,{D:()=>k});var i=t(58168),a=t(80045),l=t(96540),o=t(14782),r=t(86527),d=t(99731),s=t(51260),c=t(65550),u=["size","href","children","handleClick","buttonStyle","type","isVisible"],m=["href","children","handleClick"],p=["handleClick","isVisible","children","href"],k=function(e){var n=e.size,t=e.href,o=e.children,r=e.handleClick,d=e.buttonStyle,m=e.type,p=e.isVisible,k=void 0===p||p,h=(0,a.A)(e,u),b=!(0,c.L)(),S=(0,s.IF)(),N=(0,s.au)(),E=(0,l.useCallback)((function(e){null==r||r(e)}),[r]);if(!k)return null;var y=S(new URL(t).pathname),w=null==y?void 0:y.params.postId,C=t;switch(b||(C=w?N("ShowMobileWebEditorRedirectEditStory",{postId:w}):N("ShowMobileWebEditorRedirectNewStory",{})),m){case"link":return l.createElement(v,(0,i.A)({href:C,handleClick:E},h),o);case"button":return l.createElement(g,{buttonStyle:d,size:n,href:C,handleClick:E},o);case"popover":return l.createElement(f,(0,i.A)({isVisible:k,href:C,handleClick:E},h),o)}},v=function(e){var n=e.href,t=e.children,o=e.handleClick,d=(0,a.A)(e,m);return l.createElement(r.N,(0,i.A)({href:n,onClick:o},d),t)},f=function(e){var n=e.handleClick,t=e.isVisible,r=void 0===t||t,d=e.children,s=e.href,c=(0,a.A)(e,p);return r?l.createElement(o.q3,null,l.createElement(v,(0,i.A)({href:s,handleClick:n},c),d)):null},g=function(e){var n=e.href,t=e.size,i=e.buttonStyle,a=e.children,o=e.handleClick;return l.createElement(d.$n,{buttonStyle:i,size:t,href:n,onClick:o},a)}},66356:(e,n,t)=>{t.d(n,{c:()=>c});var i=t(54499),a=t(43253),l=t(53303),o=t(55127),r=t.n(o),d=t(96540),s=t(91271);function c(e){var n=e.hasPrefix,t=void 0!==n&&n,o=e.timestamp,c=e.testId,u=e.isShorthand,m=e.isSameYearShorthand,p=e.includeMinutesAgo,k=Date.now(),v=(0,i.A)(k,o),f=(0,a.A)(k,o);if(0===f){var g=(0,l.A)(k,o);if(p&&g>0){var h="".concat(g," ").concat(r()("min",g)," ago");return d.createElement(d.Fragment,null,h)}var b=t?"just now":"Just now";return d.createElement(d.Fragment,null,b)}if(f>=1&&f<24){var S=u?"".concat(f,"h ago"):"".concat(f," ").concat(r()("hour",f)," ago");return d.createElement(d.Fragment,null,S)}if(v>=1&&v<7){var N=u?"".concat(v,"d ago"):"".concat(v," ").concat(r()("day",v)," ago");return d.createElement(d.Fragment,null,N)}return(0,s.n9)({timestamp:o,testId:c,isShorthand:u,isSameYearShorthand:m})}},83573:(e,n,t)=>{t.d(n,{s:()=>i});var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UserReportStoryMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetAuthorId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"alsoBlockAuthor"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"reason"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reportStoryAndMaybeBlockAuthor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}}},{kind:"Argument",name:{kind:"Name",value:"targetAuthorId"},value:{kind:"Variable",name:{kind:"Name",value:"targetAuthorId"}}},{kind:"Argument",name:{kind:"Name",value:"alsoBlockAuthor"},value:{kind:"Variable",name:{kind:"Name",value:"alsoBlockAuthor"}}},{kind:"Argument",name:{kind:"Name",value:"reason"},value:{kind:"Variable",name:{kind:"Name",value:"reason"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isBlocking"}}]}}]}}]}}]}},17045:(e,n,t)=>{t.d(n,{M:()=>s});var i=t(80296),a=t(95420),l=t(96540),o=t(72130),r=t(91830),d=t(83573);function s(e){var n=e.viewerId,t=e.targetAuthorId,s=e.targetPostId,c=e.onOptimisticComplete,u=(0,r.zF)(),m=(0,o.$L)(),p=(0,a.n)(d.s),k=(0,i.A)(p,1)[0];return(0,l.useCallback)((function(e,i){k({variables:{targetAuthorId:t,targetPostId:s,alsoBlockAuthor:e,reason:i},onCompleted:function(){u({message:"Successfully reported post."}),m.event("post.flagged",{postId:s,reason:i})},onError:function(){u({message:"Unable to report this story. Please try again later."})},optimisticResponse:{__typename:"Mutation",reportStoryAndMaybeBlockAuthor:{__typename:"User",id:t,viewerEdge:{__typename:"UserViewerEdge",id:"userId:".concat(t,"-viewerId:").concat(n),isBlocking:e}}}}),null==c||c()}),[k,n,t,s,c])}},83983:(e,n,t)=>{t.d(n,{G:()=>i,P:()=>a});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"subscribersCount"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"isNewsletter"}},{kind:"Field",name:{kind:"Name",value:"isAuthorNewsletter"}}]}}]},a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SendPostAsEmailsMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendPostAsEmails"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}]}]}}]}},60487:(e,n,t)=>{t.d(n,{z:()=>w});var i,a=t(64467),l=t(80296),o=t(95420),r=t(96540),d=t(52764),s=t(14782),c=t(86527),u=t(52290),m=t(46445),p=t(36557),k=t(44402),v=t(91830);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)({}).hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},f.apply(null,arguments)}const g=function(e){return r.createElement("svg",f({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,viewBox:"0 0 20 16"},e),i||(i=r.createElement("path",{d:"M0 .353v15.294h20V.353zm6.948 9.374L10 12.226l3.052-2.499 4.877 4.73H2.071zm-5.75 3.913V5.02l4.82 3.946zm12.784-4.675 4.82-3.946v8.621zm4.82-7.421v1.933L10 10.682 1.198 3.477V1.544z"})))};var h=t(60603),b=t(83983);function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach((function(n){(0,a.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function E(e){return{fill:e.colorTokens.foreground.neutral.secondary.base}}var y={height:"16px",width:"16px",marginLeft:"4px"};function w(e){var n=e.post,t=e.onClick,i=e.menuStyle,a=(0,k.l)(),f=(0,h.e)(!1),S=(0,l.A)(f,3),w=S[0],C=S[1],A=S[2],P=(0,v.zF)(),F=function(){A(),t()},x=(0,o.n)(b.P,{variables:{postId:(null==n?void 0:n.id)||""},onCompleted:function(e){var n=e.sendPostAsEmails;P(n?{message:"Your story has been emailed to subscribers.",toastStyle:"MESSAGE",duration:2e3}:{message:"We couldn't process your request. Try again, or contact our support team.",toastStyle:"ERROR",duration:2e3})},update:function(e,t){var i={id:"Post:".concat(null==n?void 0:n.id),fragment:b.G,fragmentName:"NewsletterV3EmailToSubscribersMenuItem_post"},a=e.readFragment(i);t.data&&a&&e.writeFragment(N(N({},i),{},{data:N(N({},a),{},{isAuthorNewsletter:t.data.sendPostAsEmails})}))}}),I=(0,l.A)(x,1)[0];return r.createElement(d.c,null,(function(e){var l,o,d;return e&&e.id===(null==n||null===(l=n.creator)||void 0===l?void 0:l.id)&&(null==n||!n.isNewsletter)&&((null==n||null===(o=n.creator)||void 0===o||null===(d=o.newsletterV3)||void 0===d?void 0:d.subscribersCount)||0)>0?r.createElement(r.Fragment,null,r.createElement(s.q3,{paddingTopBottom:"8px"},r.createElement(c.N,{"data-testid":"emailToSubscribersMenuItem",onClick:function(){null!=n&&n.isAuthorNewsletter?(P({message:"You’ve already sent this story to subscribers.",toastStyle:"ERROR",duration:2e3}),t()):C()}},"TEXT"===i?r.createElement(u.a,{display:"inline-block"},r.createElement(p.kZ,{scale:"M"},"Email to subscribers")):r.createElement(u.a,{display:"inline-block"},r.createElement(g,{className:a([E,y])}),r.createElement(u.a,{display:"inline-block",marginLeft:"20px"},r.createElement(p.kZ,{scale:"S"},"Email to subscribers"))))),r.createElement(m.T,{onConfirm:function(){I(),F()},isVisible:w,hide:F,titleText:"Email to subscribers",confirmText:"Send",buttonStyle:"STRONG",buttonSize:"LARGE",showCancelButton:!0,withCloseButton:!0,isDestructiveAction:!1},"A link to this story will be emailed to all your subscribers.")):r.createElement(r.Fragment,null)}))}},69415:(e,n,t)=>{t.d(n,{g:()=>k,y:()=>v});var i=t(80296),a=t(57746),l=t(96540),o=t(72130),r=t(49287),d=t(91830),s=t(66973),c=t(75636),u=(0,l.createContext)({areHighlightsHidden:!1,toggleHideHighlights:function(){return null}}),m=new s.A("post-view-settings"),p="hide-highlights";function k(e){var n=e.postId,t=e.children,s=(0,c.z)({name:"enable_inline_comments",placeholder:!1}),k=(0,l.useState)(!!m.get(p)),v=(0,i.A)(k,2),f=v[0],g=v[1],h=(0,d.zF)(),b=(0,o.$L)(),S=(0,r.jI)(),N=(0,l.useCallback)((function(e){m.set(p,e),g(e),b.event("displaySettings.highlights_from_others",{showHighlights:!e,postId:n,source:S})}),[n,S]),E=(0,l.useCallback)((function(){N(!f),h({message:"Highlights from others are ".concat(f?"visible":"hidden"," for you"),toastStyle:"MESSAGE",extraParams:{onClickUndo:function(){return N(f)},hideCloseButton:!0}})}),[f]),y=(0,l.useMemo)((function(){return{areHighlightsHidden:f,toggleHideHighlights:E}}),[f,E]);return(0,l.useEffect)((function(){if(s){var e=function(e){(0,a.default)("mod+/",e)&&E()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}}),[E,s]),l.createElement(u.Provider,{value:y},t)}var v=function(){return(0,l.useContext)(u)}},38714:(e,n,t)=>{t.d(n,{M:()=>i,b:()=>a});var i=function(e){return!!e&&(e.isAuroraVisible||"Collection"===e.__typename&&e.isAuroraEligible&&e.viewerEdge.isEditor)},a=function(e){return!!e&&("Collection"===e.__typename?e.isAuroraVisible||e.isAuroraEligible&&e.viewerEdge.isEditor:e.isAuroraVisible)}},89429:(e,n,t)=>{t.d(n,{N:()=>i});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"useIsPinnedInContext_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedByCreatorAt"}}]}}]}},89142:(e,n,t)=>{t.d(n,{L:()=>d,m:()=>s});var i=t(80296),a=t(95420),l=t(96540),o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SetPinnedAtMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pinnedAt"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"setPinnedAt"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"targetCollectionId"},value:{kind:"Variable",name:{kind:"Name",value:"collectionId"}}},{kind:"Argument",name:{kind:"Name",value:"pinnedAt"},value:{kind:"Variable",name:{kind:"Name",value:"pinnedAt"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}}]}}]}}]}}]},r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PostSetPinnedByCreatorAtMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isPinned"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setPostPinnedOnCreatorProfile"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"ObjectField",name:{kind:"Name",value:"isPinned"},value:{kind:"Variable",name:{kind:"Name",value:"isPinned"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]},d=function(e){var n=e.id,t=e.collection,r=e.pendingCollection,d=e.pinnedAt,s=(t||r||{id:""}).id,c=(0,a.n)(o,{optimisticResponse:{__typename:"Mutation",setPinnedAt:{__typename:"Post",id:n,collection:t,pendingCollection:r,pinnedAt:d?0:Date.now()}}}),u=(0,i.A)(c,1)[0],m=l.useCallback((function(){return u({variables:{postId:n,collectionId:s,pinnedAt:!d}})}),[n,s,d,u]);return[d,m]},s=function(e){var n=e.id,t=e.pinnedByCreatorAt,o=(0,a.n)(r,{optimisticResponse:{setPostPinnedOnCreatorProfile:{__typename:"MutationSuccess"}},update:function(e,i){var a;"MutationSuccess"===(null===(a=i.data)||void 0===a?void 0:a.setPostPinnedOnCreatorProfile.__typename)&&e.modify({id:"Post:".concat(n),fields:{pinnedByCreatorAt:function(){return t?0:Date.now()}}})}}),d=(0,i.A)(o,1)[0],s=l.useCallback((function(){return d({variables:{postId:n,isPinned:!t}})}),[n,d,t]);return[t,s]}},32038:(e,n,t)=>{t.d(n,{T:()=>a,e:()=>i});var i="This story is also a response to another story. Are you sure you want to delete this story?",a="This story is also a response to another story. Any edits are applied to both."},32996:(e,n,t)=>{t.d(n,{A:()=>s});var i=t(58168),a=t(96540),l=t(86527),o=t(52290),r=t(24960),d=t(36557);function s(e){var n=e.boxProps,t=void 0===n?{}:n,s=e.children,c=e.dismiss,u=e.dismissText,m=void 0===u?"Ok, got it.":u,p=e.isVisible,k=e.onShow,v=e.message,f=e.withBoldNew,g=void 0!==f&&f,h=e.targetDistance,b=void 0===h?5:h,S=e.positioningStrategy;return(0,a.useEffect)((function(){p&&k&&k()}),[p]),a.createElement(r.A,{hide:c,isVisible:p,noPortal:!0,darkTheme:!0,popoverRenderFn:function(){return a.createElement(o.a,(0,i.A)({padding:"16px"},t),a.createElement(o.a,{marginBottom:"12px"},a.createElement(d.kZ,{scale:"S",color:"WHITE",tag:"span"},g&&a.createElement("strong",null,"New! "),v)),a.createElement(d.kZ,{scale:"S",color:"WHITE"},a.createElement(l.N,{onClick:c,linkStyle:"OBVIOUS",inline:!0},m)))},targetDistance:b,positioningStrategy:S,role:"tooltip"},s)}},55981:(e,n,t)=>{t.d(n,{n:()=>r});var i=t(96540),a=t(44402),l=t(1417),o=function(e){return{"& path":{fill:e.colorTokens.foreground.error.primary.base}}},r=function(){var e=(0,a.l)();return i.createElement(l.A,{className:e(o)})}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/6199.c727247b.chunk.js.map